{% extends 'admin/layout.html.twig' %}

{% block page_title %}
    {{ 'title.admin.form.endpoint.list'|trans }}
{% endblock %}

{% block page_content %}
    <div class="max-w-(--breakpoint-xl) space-y-4">
        <div class="flex items-start justify-between flex-wrap">
            <a href="{{ path('app_admin_form_endpoint_new') }}" class="btn btn-primary ml-auto" data-turbo-frame="turbo-modal">
                {{ 'action.form.endpoint.new'|trans }}
            </a>
        </div>

        <twig:Table:Root>
            <twig:Table:Header>
                <twig:Table:Head>{{ 'label.form.endpoint.name'|trans }}</twig:Table:Head>
                <twig:Table:Head>{{ 'label.form.endpoint.enabled'|trans }}</twig:Table:Head>
                <twig:Table:Head>{{ 'label.form.endpoint.submissions'|trans }}</twig:Table:Head>
                <twig:Table:Head>{{ 'label.form.endpoint.actions'|trans }}</twig:Table:Head>
            </twig:Table:Header>

            <twig:Table:Body>
                {% for form in endpoints %}
                    <twig:Table:Row>
                        <twig:Table:Cell class="font-medium">{{ form.name }}</twig:Table:Cell>
                        <twig:Table:Cell>
                            {% if form.isActive %}
                                <div class="flex items-center gap-2">
                                    {{ ux_icon('heroicons:check-circle-20-solid', {'class': 'size-5 text-green-600'}) }}
                                    <span >{{ 'label.yes'|trans }}</span>
                                </div>
                            {% else %}
                            <div class="flex items-center gap-2">
                                {{ ux_icon('heroicons:x-circle-20-solid', {'class': 'size-5 text-destructive-600'}) }}
                                <span>{{ 'label.no'|trans }}</span>
                            </div>
                            {% endif %}
                        </twig:Table:Cell>
                        <twig:Table:Cell>{{ form.submissionsCount }}</twig:Table:Cell>
                        <twig:Table:Cell>
                            <div class="flex gap-2 items-center">
                                <a href="{{ path('app_admin_form_endpoint_submission_list', {'id': form.id}) }}"
                                   class="link font-medium no-underline"
                                >
                                    {{ 'label.form.endpoint.details'|trans }}
                                </a>

                                <a href="#" class="text-destructive-600 font-medium">
                                    {{ 'label.form.endpoint.delete'|trans }}
                                </a>
                            </div>
                        </twig:Table:Cell>
                    </twig:Table:Row>
                {% else %}
                    <twig:Table:Row>
                        <twig:Table:Cell colspan="4" class="text-center">{{ 'label.form.endpoint.no_endpoints'|trans }}</twig:Table:Cell>
                    </twig:Table:Row>
                {% endfor %}
            </twig:Table:Body>
        </twig:Table:Root>
    </div>
{% endblock %}
